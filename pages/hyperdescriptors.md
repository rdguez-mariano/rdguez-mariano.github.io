---
layout: default2
title: "Research"
header-img: "/img/paris.jpg"
---

Fast Affine Invariant Image Matching
===================
*Journal*: [IPOL](http://www.ipol.im/)

*Abstract*:
Methods performing  Image Matching by Affine Simulation (IMAS) attain affine invariance by applying a finite set of affine transforms to the images before comparing them with a   Scale Invariant Image Matching  (SIIM) method like SIFT or SURF. We describe here how  to optimize IMAS methods. First, we detail an algorithm computing a minimal discrete set of affine transforms to be applied to each image before comparison.  It yields a full practical affine invariance at the lowest computational cost.  The matching complexity of current IMAS algorithms is divided by about 4. Our approach also associates to each image an affine invariant set of descriptors, which is twice smaller than the set of descriptors usually used in IMAS methods, and only 6.4 times larger than the set of similarity invariant descriptors of SIIM methods. In order to reduce the number of false matches, which are inherently more frequent in IMAS approaches than in SIIM, we introduce the notion of hyper-descriptor, which groups descriptors whose keypoints are spatially close. Finally, we also propose a matching criterion allowing each keypoint of the query image to be matched with several keypoints of the target image, in order to deal with situations where an object is repeated several times in the target image.

<center><a href="/pages/hyperdescriptors">See this article</a> <small>(on IPOL)</small></center>
<center><a href="http://ipolcore.ipol.im/demo/clientApp/demo.html?id=77777000011">Test it online</a> <small>(on IPOL)</small></center>
<center><a href="https://github.com/rdguez-mariano/fast_imas_IPOL">Source code</a> <small>(on Github)</small></center>

<p></p>
The above source code is a standalone C++ code for IMAS (as in IPOL) implementing Fast-Affine-{SIFT, RootSIFT, Half-SIFT, HALF-RootSIFT, SURF}.

*Remark: This source code comes with a doxygen documentation.*


### IMAS on MATLAB
To have access to IMAS on MATLAB we propose to use the MEX compiler. The original code of both C++ implementations of IMAS (standalone or opencv) is handled through the MATLAB function **"perform_IMAS.m"** in the following repository: [imas_analytics](https://github.com/rdguez-mariano/imas_analytics).

*Remark: Follow the instructions in this repo to properly set up the link between IMAS and MATLAB.*

### Finding near optimal coverings
 The C++ code for finding near optimal coverings based on radius (initial visibility) and the region to cover is available in the following repository: [imas_analytics](https://github.com/rdguez-mariano/imas_analytics).

 First, go to the folder **"opt_covering"** and then compile in linux with :
 ```bash
 mkdir -p build && cd build && cmake .. && make
 ```

 This code doesn't have any documentation available yet but there exist a pseudo-code in the article to which this page is associated. Executing the program is very simple, the following example in bash is clear enough:
 ```bash
 r=1.6           # radius of disks
 region=4.5      # region to be covered
 N=2             # number of groups of concentric disks

 epsilon=1.025   # Parameter for discretising annulus.
                 # Used to check for covering conditions

 ./opt_covering $r $region $epsilon $N
 ```

 The above bash commands would return all parameters determining a near optimal covering. The following image was auto-generated by the above execution of this program.
 <center>
 <div > <img src="/img/imas/opt_covering.png" alt="2D" width="60%"> </div>
 </center>

### About [ASIFT](http://demo.ipol.im/demo/my_affine_sift/)
The present IMAS version shares with ASIFT the idea of simulating affine distortions. Two main differences are observed:
* **The set of affine simulations**. ASIFT generates overlapping affine distortions whereas this IMAS version applies near optimal coverings as in the paper [Covering the Space of Tilts](/pages/imas).
* **The structure**. ASIFT applies the SIFT method among all possible combinations of simulated query and target images; whereas this IMAS version compares in a single stage both set of hyper-descriptors coming from the query and target images.

#### Reproducing our comparison to ASIFT
To reproduce our results concerning ASIFT you can download the following file: [tests_newIMAS_vs_oldIMAS.zip](/data/tests_newIMAS_vs_oldIMAS.zip). This file contains the ASIFT code modified only to activate/deactivate filters, to obtain a more verbose mode, to add more descriptors (i.e. RootSIFT, HALF-SIFT), to select different coverings, etc. In any case, this version of ASIFT is a more complete one than the one proposed in [IPOL](http://www.ipol.im/pub/art/2011/my-asift/). Once extracted, execute the following bash scripts:
```bash
# Compile both IMAS versions automatically
# The old version contains the ASIFT implementation
./compile.sh

# Compares the ASIFT covering against the near optimal one
# This under the ASIFT structure (i.e. No hyper-descriptors, etc)
./execute_coverings.sh graf1.png graf2.png

# Compares the ancient ASIFT structure to IMAS with hyper-descriptors
./execute_HD.sh graf1.png graf2.png
```
